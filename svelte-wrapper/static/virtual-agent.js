var VirtualAgent=(function(){"use strict";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add("5");const ze=1,Be=2,w=Symbol(),He="http://www.w3.org/1999/xhtml",zt=!1;var Bt=Array.isArray,Ye=Array.prototype.indexOf,Ke=Array.from,Rt=Object.defineProperty,rt=Object.getOwnPropertyDescriptor,Ge=Object.getOwnPropertyDescriptors,Ze=Object.prototype,Je=Array.prototype,Ht=Object.getPrototypeOf,Yt=Object.isExtensible;function Qe(t){for(var e=0;e<t.length;e++)t[e]()}function Kt(){var t,e,n=new Promise((r,i)=>{t=r,e=i});return{promise:n,resolve:t,reject:e}}const m=2,Gt=4,Mt=8,J=16,W=32,Q=64,Pt=128,O=256,pt=512,b=1024,A=2048,q=4096,z=8192,X=16384,Zt=32768,gt=65536,Jt=1<<17,Xe=1<<18,it=1<<19,$e=1<<20,Ft=1<<21,Dt=1<<22,$=1<<23,wt=Symbol("$state"),tn=Symbol("legacy props"),st=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function en(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function nn(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function rn(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function sn(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function ln(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function an(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function fn(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}function on(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function Qt(t){return t===this.v}let un=!1,R=null;function lt(t){R=t}function Xt(t,e=!1,n){R={p:R,c:null,e:null,s:t,x:null,l:null}}function $t(t){var e=R,n=e.e;if(n!==null){e.e=null;for(var r of n)Cn(r)}return R=e.p,{}}function te(){return!0}let at=[];function cn(){var t=at;at=[],Qe(t)}function mt(t){if(at.length===0){var e=at;queueMicrotask(()=>{e===at&&cn()})}at.push(t)}const hn=new WeakMap;function ee(t){var e=p;if(e===null)return _.f|=$,t;if((e.f&Zt)===0){if((e.f&Pt)===0)throw!e.parent&&t instanceof Error&&ne(t),t;e.b.error(t)}else ft(t,e)}function ft(t,e){for(;e!==null;){if((e.f&Pt)!==0)try{e.b.error(t);return}catch(n){t=n}e=e.parent}throw t instanceof Error&&ne(t),t}function ne(t){const e=hn.get(t);e&&(Rt(t,"message",{value:e.message}),Rt(t,"stack",{value:e.stack}))}const bt=new Set;let g=null,M=null,It=new Set,B=[],Lt=null,Vt=!1;class D{current=new Map;#e=new Map;#t=new Set;#n=0;#i=null;#a=[];#l=[];#s=[];#r=[];#f=[];skipped_effects=new Set;process(e){B=[],this.apply();for(const s of e)this.#o(s);if(this.#n===0){var n=M;this.#c();var r=this.#a,i=this.#l;this.#a=[],this.#l=[],this.#s=[],g=null,M=n,re(r),re(i),this.#i?.resolve()}else this.#u(this.#a),this.#u(this.#l),this.#u(this.#s);M=null}#o(e){e.f^=b;for(var n=e.first;n!==null;){var r=n.f,i=(r&(W|Q))!==0,s=i&&(r&b)!==0,l=s||(r&z)!==0||this.skipped_effects.has(n);if(!l&&n.fn!==null){i?n.f^=b:(r&Gt)!==0?this.#l.push(n):At(n)&&((n.f&J)!==0&&this.#s.push(n),St(n));var f=n.first;if(f!==null){n=f;continue}}var a=n.parent;for(n=n.next;n===null&&a!==null;)n=a.next,a=a.parent}}#u(e){for(const n of e)((n.f&A)!==0?this.#r:this.#f).push(n),E(n,b);e.length=0}capture(e,n){this.#e.has(e)||this.#e.set(e,n),this.current.set(e,e.v),M?.set(e,e.v)}activate(){g=this}deactivate(){g=null,M=null}flush(){if(B.length>0){if(this.activate(),dn(),g!==null&&g!==this)return}else this.#n===0&&this.#c();this.deactivate();for(const e of It)if(It.delete(e),e(),g!==null)break}#c(){for(const e of this.#t)e();if(this.#t.clear(),bt.size>1){this.#e.clear();let e=!0;for(const n of bt){if(n===this){e=!1;continue}const r=[];for(const[s,l]of this.current){if(n.current.has(s))if(e&&l!==n.current.get(s))n.current.set(s,l);else continue;r.push(s)}if(r.length===0)continue;const i=[...n.current.keys()].filter(s=>!this.current.has(s));if(i.length>0){for(const s of r)ie(s,i);if(B.length>0){g=n,n.apply();for(const s of B)n.#o(s);B=[],n.deactivate()}}}g=null}bt.delete(this)}increment(){this.#n+=1}decrement(){this.#n-=1;for(const e of this.#r)E(e,A),et(e);for(const e of this.#f)E(e,q),et(e);this.flush()}add_callback(e){this.#t.add(e)}settled(){return(this.#i??=Kt()).promise}static ensure(){if(g===null){const e=g=new D;bt.add(g),D.enqueue(()=>{g===e&&e.flush()})}return g}static enqueue(e){mt(e)}apply(){}}function dn(){var t=ut;Vt=!0;try{var e=0;for(ke(!0);B.length>0;){var n=D.ensure();if(e++>1e3){var r,i;vn()}n.process(B),H.clear()}}finally{Vt=!1,ke(t),Lt=null}}function vn(){try{nn()}catch(t){ft(t,Lt)}}let tt=null;function re(t){var e=t.length;if(e!==0){for(var n=0;n<e;){var r=t[n++];if((r.f&(X|z))===0&&At(r)&&(tt=[],St(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null&&r.ac===null?be(r):r.fn=null),tt?.length>0)){H.clear();for(const i of tt)St(i);tt=[]}}tt=null}}function ie(t,e){if(t.reactions!==null)for(const n of t.reactions){const r=n.f;(r&m)!==0?ie(n,e):(r&(Dt|J))!==0&&se(n,e)&&(E(n,A),et(n))}}function se(t,e){if(t.deps!==null){for(const n of t.deps)if(e.includes(n)||(n.f&m)!==0&&se(n,e))return!0}return!1}function et(t){for(var e=Lt=t;e.parent!==null;){e=e.parent;var n=e.f;if(Vt&&e===p&&(n&J)!==0)return;if((n&(Q|W))!==0){if((n&b)===0)return;e.f^=b}}B.push(e)}function _n(t){let e=0,n=yt(0),r;return()=>{Nn()&&(L(n),Mn(()=>(e===0&&(r=Un(()=>t(()=>dt(n)))),e+=1,()=>{mt(()=>{e-=1,e===0&&(r?.(),r=void 0,dt(n))})})))}}var pn=gt|it|Pt;function gn(t,e,n){new wn(t,e,n)}class wn{parent;#e=!1;#t;#n=null;#i;#a;#l;#s=null;#r=null;#f=null;#o=null;#u=0;#c=0;#d=!1;#h=null;#g=()=>{this.#h&&Et(this.#h,this.#u)};#w=_n(()=>(this.#h=yt(this.#u),()=>{this.#h=null}));constructor(e,n,r){this.#t=e,this.#i=n,this.#a=r,this.parent=p.b,this.#e=!!this.#i.pending,this.#l=ge(()=>{p.b=this;{try{this.#s=V(()=>r(this.#t))}catch(i){this.error(i)}this.#c>0?this.#_():this.#e=!1}},pn)}#m(){try{this.#s=V(()=>this.#a(this.#t))}catch(e){this.error(e)}this.#e=!1}#b(){const e=this.#i.pending;e&&(this.#r=V(()=>e(this.#t)),D.enqueue(()=>{this.#s=this.#v(()=>(D.ensure(),V(()=>this.#a(this.#t)))),this.#c>0?this.#_():(vt(this.#r,()=>{this.#r=null}),this.#e=!1)}))}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#i.pending}#v(e){var n=p,r=_,i=R;I(this.#l),T(this.#l),lt(this.#l.ctx);try{return e()}catch(s){return ee(s),null}finally{I(n),T(r),lt(i)}}#_(){const e=this.#i.pending;this.#s!==null&&(this.#o=document.createDocumentFragment(),xe(this.#s,this.#o)),this.#r===null&&(this.#r=V(()=>e(this.#t)))}#p(e){if(!this.has_pending_snippet()){this.parent&&this.parent.#p(e);return}this.#c+=e,this.#c===0&&(this.#e=!1,this.#r&&vt(this.#r,()=>{this.#r=null}),this.#o&&(this.#t.before(this.#o),this.#o=null),mt(()=>{D.ensure().flush()}))}update_pending_count(e){this.#p(e),this.#u+=e,It.add(this.#g)}get_effect_pending(){return this.#w(),L(this.#h)}error(e){var n=this.#i.onerror;let r=this.#i.failed;if(this.#d||!n&&!r)throw e;this.#s&&(S(this.#s),this.#s=null),this.#r&&(S(this.#r),this.#r=null),this.#f&&(S(this.#f),this.#f=null);var i=!1,s=!1;const l=()=>{if(i){on();return}i=!0,s&&fn(),D.ensure(),this.#u=0,this.#f!==null&&vt(this.#f,()=>{this.#f=null}),this.#e=this.has_pending_snippet(),this.#s=this.#v(()=>(this.#d=!1,V(()=>this.#a(this.#t)))),this.#c>0?this.#_():this.#e=!1};var f=_;try{T(null),s=!0,n?.(e,l),s=!1}catch(a){ft(a,this.#l&&this.#l.parent)}finally{T(f)}r&&mt(()=>{this.#f=this.#v(()=>{this.#d=!0;try{return V(()=>{r(this.#t,()=>e,()=>l)})}catch(a){return ft(a,this.#l.parent),null}finally{this.#d=!1}})})}}function mn(t,e,n){const r=le;if(e.length===0){n(t.map(r));return}var i=g,s=p,l=bn();Promise.all(e.map(f=>yn(f))).then(f=>{l();try{n([...t.map(r),...f])}catch(a){(s.f&X)===0&&ft(a,s)}i?.deactivate(),jt()}).catch(f=>{ft(f,s)})}function bn(){var t=p,e=_,n=R,r=g;return function(){I(t),T(e),lt(n),r?.activate()}}function jt(){I(null),T(null),lt(null)}function le(t){var e=m|A,n=_!==null&&(_.f&m)!==0?_:null;return p===null||n!==null&&(n.f&O)!==0?e|=O:p.f|=it,{ctx:R,deps:null,effects:null,equals:Qt,f:e,fn:t,reactions:null,rv:0,v:w,wv:0,parent:n??p,ac:null}}function yn(t,e){let n=p;n===null&&en();var r=n.b,i=void 0,s=yt(w),l=!_,f=new Map;return Rn(()=>{var a=Kt();i=a.promise;try{Promise.resolve(t()).then(a.resolve,a.reject).then(jt)}catch(d){a.reject(d),jt()}var o=g,u=r.is_pending();l&&(r.update_pending_count(1),u||(o.increment(),f.get(o)?.reject(st),f.delete(o),f.set(o,a)));const h=(d,c=void 0)=>{if(u||o.activate(),c)c!==st&&(s.f|=$,Et(s,c));else{(s.f&$)!==0&&(s.f^=$),Et(s,d);for(const[v,x]of f){if(f.delete(v),v===o)break;x.reject(st)}}l&&(r.update_pending_count(-1),u||o.decrement())};a.promise.then(h,d=>h(null,d||"unknown"))}),Sn(()=>{for(const a of f.values())a.reject(st)}),new Promise(a=>{function o(u){function h(){u===i?a(s):o(i)}u.then(h,h)}o(i)})}function ae(t){var e=t.effects;if(e!==null){t.effects=null;for(var n=0;n<e.length;n+=1)S(e[n])}}function En(t){for(var e=t.parent;e!==null;){if((e.f&m)===0)return e;e=e.parent}return null}function Ut(t){var e,n=p;I(En(t));try{ae(t),e=Oe(t)}finally{I(n)}return e}function fe(t){var e=Ut(t);if(t.equals(e)||(t.v=e,t.wv=Se()),!ct)if(M!==null)M.set(t,t.v);else{var n=(Z||(t.f&O)!==0)&&t.deps!==null?q:b;E(t,n)}}const H=new Map;function yt(t,e){var n={f:0,v:t,reactions:null,equals:Qt,rv:0,wv:0};return n}function Y(t,e){const n=yt(t);return Ln(n),n}function K(t,e,n=!1){_!==null&&(!P||(_.f&Jt)!==0)&&te()&&(_.f&(m|J|Dt|Jt))!==0&&!j?.includes(t)&&an();let r=n?ot(e):e;return Et(t,r)}function Et(t,e){if(!t.equals(e)){var n=t.v;ct?H.set(t,e):H.set(t,n),t.v=e;var r=D.ensure();r.capture(t,n),(t.f&m)!==0&&((t.f&A)!==0&&Ut(t),E(t,(t.f&O)===0?b:q)),t.wv=Se(),oe(t,A),p!==null&&(p.f&b)!==0&&(p.f&(W|Q))===0&&(C===null?Vn([t]):C.push(t))}return e}function dt(t){K(t,t.v+1)}function oe(t,e){var n=t.reactions;if(n!==null)for(var r=n.length,i=0;i<r;i++){var s=n[i],l=s.f,f=(l&A)===0;f&&E(s,e),(l&m)!==0?oe(s,q):f&&((l&J)!==0&&tt!==null&&tt.push(s),et(s))}}function ot(t){if(typeof t!="object"||t===null||wt in t)return t;const e=Ht(t);if(e!==Ze&&e!==Je)return t;var n=new Map,r=Bt(t),i=Y(0),s=nt,l=f=>{if(nt===s)return f();var a=_,o=nt;T(null),Ne(s);var u=f();return T(a),Ne(o),u};return r&&n.set("length",Y(t.length)),new Proxy(t,{defineProperty(f,a,o){(!("value"in o)||o.configurable===!1||o.enumerable===!1||o.writable===!1)&&sn();var u=n.get(a);return u===void 0?u=l(()=>{var h=Y(o.value);return n.set(a,h),h}):K(u,o.value,!0),!0},deleteProperty(f,a){var o=n.get(a);if(o===void 0){if(a in f){const u=l(()=>Y(w));n.set(a,u),dt(i)}}else K(o,w),dt(i);return!0},get(f,a,o){if(a===wt)return t;var u=n.get(a),h=a in f;if(u===void 0&&(!h||rt(f,a)?.writable)&&(u=l(()=>{var c=ot(h?f[a]:w),v=Y(c);return v}),n.set(a,u)),u!==void 0){var d=L(u);return d===w?void 0:d}return Reflect.get(f,a,o)},getOwnPropertyDescriptor(f,a){var o=Reflect.getOwnPropertyDescriptor(f,a);if(o&&"value"in o){var u=n.get(a);u&&(o.value=L(u))}else if(o===void 0){var h=n.get(a),d=h?.v;if(h!==void 0&&d!==w)return{enumerable:!0,configurable:!0,value:d,writable:!0}}return o},has(f,a){if(a===wt)return!0;var o=n.get(a),u=o!==void 0&&o.v!==w||Reflect.has(f,a);if(o!==void 0||p!==null&&(!u||rt(f,a)?.writable)){o===void 0&&(o=l(()=>{var d=u?ot(f[a]):w,c=Y(d);return c}),n.set(a,o));var h=L(o);if(h===w)return!1}return u},set(f,a,o,u){var h=n.get(a),d=a in f;if(r&&a==="length")for(var c=o;c<h.v;c+=1){var v=n.get(c+"");v!==void 0?K(v,w):c in f&&(v=l(()=>Y(w)),n.set(c+"",v))}if(h===void 0)(!d||rt(f,a)?.writable)&&(h=l(()=>Y(void 0)),K(h,ot(o)),n.set(a,h));else{d=h.v!==w;var x=l(()=>ot(o));K(h,x)}var k=Reflect.getOwnPropertyDescriptor(f,a);if(k?.set&&k.set.call(u,o),!d){if(r&&typeof a=="string"){var U=n.get("length"),F=Number(a);Number.isInteger(F)&&F>=U.v&&K(U,F+1)}dt(i)}return!0},ownKeys(f){L(i);var a=Reflect.ownKeys(f).filter(h=>{var d=n.get(h);return d===void 0||d.v!==w});for(var[o,u]of n)u.v!==w&&!(o in f)&&a.push(o);return a},setPrototypeOf(){ln()}})}var ue,ce,he,de;function xn(){if(ue===void 0){ue=window,ce=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,n=Text.prototype;he=rt(e,"firstChild").get,de=rt(e,"nextSibling").get,Yt(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),Yt(n)&&(n.__t=void 0)}}function Wt(t=""){return document.createTextNode(t)}function xt(t){return he.call(t)}function kt(t){return de.call(t)}function Tt(t,e){return xt(t)}function kn(t,e=!1){{var n=xt(t);return n instanceof Comment&&n.data===""?kt(n):n}}function ve(t,e=1,n=!1){let r=t;for(;e--;)r=kt(r);return r}function Tn(){return!1}function _e(t){var e=_,n=p;T(null),I(null);try{return t()}finally{T(e),I(n)}}function An(t,e){var n=e.last;n===null?e.last=e.first=t:(n.next=t,t.prev=n,e.last=t)}function G(t,e,n,r=!0){var i=p;i!==null&&(i.f&z)!==0&&(t|=z);var s={ctx:R,deps:null,nodes_start:null,nodes_end:null,f:t|A,first:null,fn:e,last:null,next:null,parent:i,b:i&&i.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{St(s),s.f|=Zt}catch(a){throw S(s),a}else e!==null&&et(s);if(r){var l=s;if(n&&l.deps===null&&l.teardown===null&&l.nodes_start===null&&l.first===l.last&&(l.f&it)===0&&(l=l.first),l!==null&&(l.parent=i,i!==null&&An(l,i),_!==null&&(_.f&m)!==0&&(t&Q)===0)){var f=_;(f.effects??=[]).push(l)}}return s}function Nn(){return _!==null&&!P}function Sn(t){const e=G(Mt,null,!1);return E(e,b),e.teardown=t,e}function Cn(t){return G(Gt|$e,t,!1)}function On(t){D.ensure();const e=G(Q|it,t,!0);return(n={})=>new Promise(r=>{n.outro?vt(e,()=>{S(e),r(void 0)}):(S(e),r(void 0))})}function Rn(t){return G(Dt|it,t,!0)}function Mn(t,e=0){return G(Mt|e,t,!0)}function pe(t,e=[],n=[]){mn(e,n,r=>{G(Mt,()=>t(...r.map(L)),!0)})}function ge(t,e=0){var n=G(J|e,t,!0);return n}function V(t,e=!0){return G(W|it,t,!0,e)}function we(t){var e=t.teardown;if(e!==null){const n=ct,r=_;Te(!0),T(null);try{e.call(null)}finally{Te(n),T(r)}}}function me(t,e=!1){var n=t.first;for(t.first=t.last=null;n!==null;){const i=n.ac;i!==null&&_e(()=>{i.abort(st)});var r=n.next;(n.f&Q)!==0?n.parent=null:S(n,e),n=r}}function Pn(t){for(var e=t.first;e!==null;){var n=e.next;(e.f&W)===0&&S(e),e=n}}function S(t,e=!0){var n=!1;(e||(t.f&Xe)!==0)&&t.nodes_start!==null&&t.nodes_end!==null&&(Fn(t.nodes_start,t.nodes_end),n=!0),me(t,e&&!n),Nt(t,0),E(t,X);var r=t.transitions;if(r!==null)for(const s of r)s.stop();we(t);var i=t.parent;i!==null&&i.first!==null&&be(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=t.ac=null}function Fn(t,e){for(;t!==null;){var n=t===e?null:kt(t);t.remove(),t=n}}function be(t){var e=t.parent,n=t.prev,r=t.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),e!==null&&(e.first===t&&(e.first=r),e.last===t&&(e.last=n))}function vt(t,e,n=!0){var r=[];ye(t,r,!0),Dn(r,()=>{n&&S(t),e&&e()})}function Dn(t,e){var n=t.length;if(n>0){var r=()=>--n||e();for(var i of t)i.out(r)}else e()}function ye(t,e,n){if((t.f&z)===0){if(t.f^=z,t.transitions!==null)for(const l of t.transitions)(l.is_global||n)&&e.push(l);for(var r=t.first;r!==null;){var i=r.next,s=(r.f&gt)!==0||(r.f&W)!==0;ye(r,e,s?n:!1),r=i}}}function In(t){Ee(t,!0)}function Ee(t,e){if((t.f&z)!==0){t.f^=z,(t.f&b)===0&&(E(t,A),et(t));for(var n=t.first;n!==null;){var r=n.next,i=(n.f&gt)!==0||(n.f&W)!==0;Ee(n,i?e:!1),n=r}if(t.transitions!==null)for(const s of t.transitions)(s.is_global||e)&&s.in()}}function xe(t,e){for(var n=t.nodes_start,r=t.nodes_end;n!==null;){var i=n===r?null:kt(n);e.append(n),n=i}}let ut=!1;function ke(t){ut=t}let ct=!1;function Te(t){ct=t}let _=null,P=!1;function T(t){_=t}let p=null;function I(t){p=t}let j=null;function Ln(t){_!==null&&(j===null?j=[t]:j.push(t))}let y=null,N=0,C=null;function Vn(t){C=t}let Ae=1,_t=0,nt=_t;function Ne(t){nt=t}let Z=!1;function Se(){return++Ae}function At(t){var e=t.f;if((e&A)!==0)return!0;if((e&q)!==0){var n=t.deps,r=(e&O)!==0;if(n!==null){var i,s,l=(e&pt)!==0,f=r&&p!==null&&!Z,a=n.length;if((l||f)&&(p===null||(p.f&X)===0)){var o=t,u=o.parent;for(i=0;i<a;i++)s=n[i],(l||!s?.reactions?.includes(o))&&(s.reactions??=[]).push(o);l&&(o.f^=pt),f&&u!==null&&(u.f&O)===0&&(o.f^=O)}for(i=0;i<a;i++)if(s=n[i],At(s)&&fe(s),s.wv>t.wv)return!0}(!r||p!==null&&!Z)&&E(t,b)}return!1}function Ce(t,e,n=!0){var r=t.reactions;if(r!==null&&!j?.includes(t))for(var i=0;i<r.length;i++){var s=r[i];(s.f&m)!==0?Ce(s,e,!1):e===s&&(n?E(s,A):(s.f&b)!==0&&E(s,q),et(s))}}function Oe(t){var e=y,n=N,r=C,i=_,s=Z,l=j,f=R,a=P,o=nt,u=t.f;y=null,N=0,C=null,Z=(u&O)!==0&&(P||!ut||_===null),_=(u&(W|Q))===0?t:null,j=null,lt(t.ctx),P=!1,nt=++_t,t.ac!==null&&(_e(()=>{t.ac.abort(st)}),t.ac=null);try{t.f|=Ft;var h=t.fn,d=h(),c=t.deps;if(y!==null){var v;if(Nt(t,N),c!==null&&N>0)for(c.length=N+y.length,v=0;v<y.length;v++)c[N+v]=y[v];else t.deps=c=y;if(!Z||(u&m)!==0&&t.reactions!==null)for(v=N;v<c.length;v++)(c[v].reactions??=[]).push(t)}else c!==null&&N<c.length&&(Nt(t,N),c.length=N);if(te()&&C!==null&&!P&&c!==null&&(t.f&(m|q|A))===0)for(v=0;v<C.length;v++)Ce(C[v],t);return i!==null&&i!==t&&(_t++,C!==null&&(r===null?r=C:r.push(...C))),(t.f&$)!==0&&(t.f^=$),d}catch(x){return ee(x)}finally{t.f^=Ft,y=e,N=n,C=r,_=i,Z=s,j=l,lt(f),P=a,nt=o}}function jn(t,e){let n=e.reactions;if(n!==null){var r=Ye.call(n,t);if(r!==-1){var i=n.length-1;i===0?n=e.reactions=null:(n[r]=n[i],n.pop())}}n===null&&(e.f&m)!==0&&(y===null||!y.includes(e))&&(E(e,q),(e.f&(O|pt))===0&&(e.f^=pt),ae(e),Nt(e,0))}function Nt(t,e){var n=t.deps;if(n!==null)for(var r=e;r<n.length;r++)jn(t,n[r])}function St(t){var e=t.f;if((e&X)===0){E(t,b);var n=p,r=ut;p=t,ut=!0;try{(e&J)!==0?Pn(t):me(t),we(t);var i=Oe(t);t.teardown=typeof i=="function"?i:null,t.wv=Ae;var s;zt&&un&&(t.f&A)!==0&&t.deps}finally{ut=r,p=n}}}function L(t){var e=t.f,n=(e&m)!==0;if(_!==null&&!P){var r=p!==null&&(p.f&X)!==0;if(!r&&!j?.includes(t)){var i=_.deps;if((_.f&Ft)!==0)t.rv<_t&&(t.rv=_t,y===null&&i!==null&&i[N]===t?N++:y===null?y=[t]:(!Z||!y.includes(t))&&y.push(t));else{(_.deps??=[]).push(t);var s=t.reactions;s===null?t.reactions=[_]:s.includes(_)||s.push(_)}}}else if(n&&t.deps===null&&t.effects===null){var l=t,f=l.parent;f!==null&&(f.f&O)===0&&(l.f^=O)}if(ct){if(H.has(t))return H.get(t);if(n){l=t;var a=l.v;return((l.f&b)===0&&l.reactions!==null||Re(l))&&(a=Ut(l)),H.set(l,a),a}}else if(n){if(l=t,M?.has(l))return M.get(l);At(l)&&fe(l)}if(M?.has(t))return M.get(t);if((t.f&$)!==0)throw t.v;return t.v}function Re(t){if(t.v===w)return!0;if(t.deps===null)return!1;for(const e of t.deps)if(H.has(e)||(e.f&m)!==0&&Re(e))return!0;return!1}function Un(t){var e=P;try{return P=!0,t()}finally{P=e}}const Wn=-7169;function E(t,e){t.f=t.f&Wn|e}const Me=new Set,qt=new Set;function qn(t){for(var e=0;e<t.length;e++)Me.add(t[e]);for(var n of qt)n(t)}let Pe=null;function Ct(t){var e=this,n=e.ownerDocument,r=t.type,i=t.composedPath?.()||[],s=i[0]||t.target;Pe=t;var l=0,f=Pe===t&&t.__root;if(f){var a=i.indexOf(f);if(a!==-1&&(e===document||e===window)){t.__root=e;return}var o=i.indexOf(e);if(o===-1)return;a<=o&&(l=a)}if(s=i[l]||t.target,s!==e){Rt(t,"currentTarget",{configurable:!0,get(){return s||n}});var u=_,h=p;T(null),I(null);try{for(var d,c=[];s!==null;){var v=s.assignedSlot||s.parentNode||s.host||null;try{var x=s["__"+r];if(x!=null&&(!s.disabled||t.target===s))if(Bt(x)){var[k,...U]=x;k.apply(s,[t,...U])}else x.call(s,t)}catch(F){d?c.push(F):d=F}if(t.cancelBubble||v===e||v===null)break;s=v}if(d){for(let F of c)queueMicrotask(()=>{throw F});throw d}}finally{t.__root=e,delete t.currentTarget,T(u),I(h)}}}function zn(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function Fe(t,e){var n=p;n.nodes_start===null&&(n.nodes_start=t,n.nodes_end=e)}function De(t,e){var n=(e&ze)!==0,r=(e&Be)!==0,i,s=!t.startsWith("<!>");return()=>{i===void 0&&(i=zn(s?t:"<!>"+t),n||(i=xt(i)));var l=r||ce?document.importNode(i,!0):i.cloneNode(!0);if(n){var f=xt(l),a=l.lastChild;Fe(f,a)}else Fe(l,l);return l}}function Ie(t,e){t!==null&&t.before(e)}const Bn=["touchstart","touchmove"];function Hn(t){return Bn.includes(t)}function Le(t,e){return Yn(t,e)}const ht=new Map;function Yn(t,{target:e,anchor:n,props:r={},events:i,context:s,intro:l=!0}){xn();var f=new Set,a=h=>{for(var d=0;d<h.length;d++){var c=h[d];if(!f.has(c)){f.add(c);var v=Hn(c);e.addEventListener(c,Ct,{passive:v});var x=ht.get(c);x===void 0?(document.addEventListener(c,Ct,{passive:v}),ht.set(c,1)):ht.set(c,x+1)}}};a(Ke(Me)),qt.add(a);var o=void 0,u=On(()=>{var h=n??e.appendChild(Wt());return gn(h,{pending:()=>{}},d=>{if(s){Xt({});var c=R;c.c=s}i&&(r.$$events=i),o=t(d,r)||{},s&&$t()}),()=>{for(var d of f){e.removeEventListener(d,Ct);var c=ht.get(d);--c===0?(document.removeEventListener(d,Ct),ht.delete(d)):ht.set(d,c)}qt.delete(a),h!==n&&h.parentNode?.removeChild(h)}});return Kn.set(o,u),o}let Kn=new WeakMap;class Gn{anchor;#e=new Map;#t=new Map;#n=new Map;#i=!0;constructor(e,n=!0){this.anchor=e,this.#i=n}#a=()=>{var e=g;if(this.#e.has(e)){var n=this.#e.get(e),r=this.#t.get(n);if(r)In(r);else{var i=this.#n.get(n);i&&(this.#t.set(n,i.effect),this.#n.delete(n),i.fragment.lastChild.remove(),this.anchor.before(i.fragment),r=i.effect)}for(const[s,l]of this.#e){if(this.#e.delete(s),s===e)break;const f=this.#n.get(l);f&&(S(f.effect),this.#n.delete(l))}for(const[s,l]of this.#t){if(s===n)continue;const f=()=>{if(Array.from(this.#e.values()).includes(s)){var o=document.createDocumentFragment();xe(l,o),o.append(Wt()),this.#n.set(s,{effect:l,fragment:o})}else S(l);this.#t.delete(s)};this.#i||!r?vt(l,f,!1):f()}}};ensure(e,n){var r=g,i=Tn();if(n&&!this.#t.has(e)&&!this.#n.has(e))if(i){var s=document.createDocumentFragment(),l=Wt();s.append(l),this.#n.set(e,{effect:V(()=>n(l)),fragment:s})}else this.#t.set(e,V(()=>n(this.anchor)));if(this.#e.set(r,e),i){for(const[f,a]of this.#t)f===e?r.skipped_effects.delete(a):r.skipped_effects.add(a);for(const[f,a]of this.#n)f===e?r.skipped_effects.delete(a.effect):r.skipped_effects.add(a.effect);r.add_callback(this.#a)}else this.#a()}}function Zn(t,e,n=!1){var r=new Gn(t),i=n?gt:0;function s(l,f){r.ensure(l,f)}ge(()=>{var l=!1;e((f,a=!0)=>{l=!0,s(a,f)}),l||s(!1,null)},i)}function Jn(t,e,n){var r=t==null?"":""+t;return r===""?null:r}function Ve(t,e,n,r,i,s){var l=t.__className;if(l!==n||l===void 0){var f=Jn(n);f==null?t.removeAttribute("class"):t.className=f,t.__className=n}return s}const Qn=Symbol("is custom element"),Xn=Symbol("is html");function $n(t,e,n,r){var i=tr(t);i[e]!==(i[e]=n)&&(n==null?t.removeAttribute(e):typeof n!="string"&&er(t).includes(e)?t[e]=n:t.setAttribute(e,n))}function tr(t){return t.__attributes??={[Qn]:t.nodeName.includes("-"),[Xn]:t.namespaceURI===He}}var je=new Map;function er(t){var e=t.getAttribute("is")||t.nodeName,n=je.get(e);if(n)return n;je.set(e,n=[]);for(var r,i=t,s=Element.prototype;s!==i;){r=Ge(i);for(var l in r)r[l].set&&n.push(l);i=Ht(i)}return n}let Ot=!1;function nr(t){var e=Ot;try{return Ot=!1,[t(),Ot]}finally{Ot=e}}function rr(t,e,n,r){var i=r,s=!0,l=()=>(s&&(s=!1,i=r),i),f;{var a=wt in t||tn in t;f=rt(t,e)?.set??(a&&e in t?k=>t[e]=k:void 0)}var o,u=!1;[o,u]=nr(()=>t[e]),o===void 0&&r!==void 0&&(o=l(),f&&(rn(),f(o)));var h;if(h=()=>{var k=t[e];return k===void 0?l():(s=!0,k)},f){var d=t.$$legacy;return(function(k,U){return arguments.length>0?((!U||d||u)&&f(U?h():k),k):h()})}var c=!1,v=le(()=>(c=!1,h()));L(v);var x=p;return(function(k,U){if(arguments.length>0){const F=U?L(v):ot(k);return K(v,F),c=!0,i!==void 0&&(i=F),k}return ct&&c||(x.f&X)!==0?v.v:L(v)})}function Ue(t,e){e(!e())}var ir=De('<div><div class="bg-white rounded-2xl shadow-2xl w-[450px] h-[700px] flex flex-col relative"><button class="absolute -top-4 -right-4 z-10 bg-white hover:bg-gray-900 text-gray-900 hover:text-white text-lg font-semibold leading-none w-10 h-10 flex items-center justify-center rounded-full border-2 border-gray-300 hover:border-white shadow-xl hover:shadow-2xl transition-all duration-200 hover:scale-105 cursor-pointer">✕</button> <div class="w-full h-full overflow-hidden rounded-2xl"><iframe class="w-full h-full border-0" title="Virtual Agent Chat"></iframe></div></div></div>'),sr=De('<!> <div><button class="flex items-center gap-2 hover:opacity-90 transition cursor-pointer rounded-full shadow-md border border-white/20 py-3 group" style="padding-left: 1rem; padding-right: 2.5rem; background: linear-gradient(135deg, rgba(255, 255, 255, 0.4), rgba(240, 240, 255, 0.3)); backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px);" aria-label="Open chat"><svg class="w-12 h-12 flex-shrink-0" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid"><g class="ldl-scale" style="transform-origin:50px 50px;transform:scale(0.8)"><g class="ldl-ani"><g class="ldl-layer"><g class="ldl-ani" style="transform-origin:50px 50px;transform:scale(0.97254);animation:pulse 1s linear infinite"><path fill="#024AD8" d="M85.889 26.091v25.576c0 6.863-6.067 12.434-12.986 12.434H38.902c-1.068 2.833-2.531 4.585-4.335 6.619.7.213 1.442-.008 2.212-.008h28.297c1.815 7.556 6.647 13.057 14.203 15.244V70.711h3.066c5.609 0 10.156-4.547 10.156-10.156V33.857c-.001-4.133-2.834-7.504-6.612-7.766z"></path></g></g><g class="ldl-layer"><g class="ldl-ani" style="transform-origin:50px 50px;transform:scale(0.91);animation:pulse 1s linear infinite"><path fill="#024AD8" fill-opacity="0.435" d="M14.892 14.045H72.83a7.392 7.392 0 0 1 7.392 7.392v29.952c0 4.394-3.595 7.989-7.989 7.989H35.397c-1.815 6.611-7.12 11.97-13.731 14.158V59.378h-6.24c-4.36 0-7.927-3.567-7.927-7.927V21.437c.001-4.066 3.327-7.392 7.393-7.392z"></path></g></g></g></g></svg> <span class="text-gray-800 font-medium text-base whitespace-nowrap group-hover:underline">Need help?</span></button></div>',1);function We(t,e){Xt(e,!0);let n=rr(e,"isOpen",15,!1);console.log("🎨 Widget received individual props:",{embedUrl:e.embedUrl,position:e.position,primaryColor:e.primaryColor,agentName:e.agentName,isOpen:n()});var r=sr(),i=kn(r);{var s=a=>{var o=ir(),u=Tt(o),h=Tt(u);h.__click=[Ue,n];var d=ve(h,2),c=Tt(d);pe(()=>{Ve(o,1,`fixed bottom-4 ${e.position==="bottom-right"?"right-4":"left-4"} z-[70]`),$n(c,"src",e.embedUrl)}),Ie(a,o)};Zn(i,a=>{n()&&a(s)})}var l=ve(i,2),f=Tt(l);f.__click=[Ue,n],pe(()=>Ve(l,1,`fixed ${e.position==="bottom-right"?"bottom-4 right-4":"bottom-4 left-4"} z-[60]`)),Ie(t,r),$t()}qn(["click"]);class lr{widget=null;config=null;container=null;init(e){console.log("🔧 VirtualAgent.init called with config:",e),this.config={position:"bottom-right",primaryColor:"#007bff",agentName:"Virtual Assistant",...e},console.log("🔧 Merged config:",this.config),this.container=document.createElement("div"),this.container.id="virtual-agent-widget",document.body.appendChild(this.container),console.log("🔧 Container created, initializing Widget component...");try{console.log("🔧 Props:",this.config),this.widget=Le(We,{target:this.container,props:this.config}),console.log("✅ Widget initialized successfully")}catch(n){throw console.error("❌ Widget initialization failed:",n),console.error("❌ Error stack:",n.stack),n}}open(){console.log("Opening widget..."),this.widget&&this.config&&this.remount({...this.config,isOpen:!0})}close(){console.log("Closing widget..."),this.widget&&this.config&&this.remount({...this.config,isOpen:!1})}toggle(){console.log("Toggling widget..."),this.open()}remount(e){this.container&&(this.widget.unmount?.(),this.container.innerHTML="",this.widget=Le(We,{target:this.container,props:e}))}updateConfig(e){if(console.log("Updating config:",e),!this.config||!this.widget){console.error("Widget not initialized");return}this.config={...this.config,...e},this.remount(this.config),console.log("✅ Config updated:",this.config)}destroy(){this.widget&&(this.widget.unmount?.(),this.widget=null)}}const qe=new lr;return window.VirtualAgent=qe,qe})();
