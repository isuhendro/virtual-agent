var VirtualAgent=(function(){"use strict";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add("5");const Be=1,Ye=2,b=Symbol(),ze="http://www.w3.org/1999/xhtml",Yt=!1;var zt=Array.isArray,He=Array.prototype.indexOf,Ke=Array.from,Rt=Object.defineProperty,rt=Object.getOwnPropertyDescriptor,Ge=Object.getOwnPropertyDescriptors,Ze=Object.prototype,Je=Array.prototype,Ht=Object.getPrototypeOf,Kt=Object.isExtensible;function Qe(t){for(var e=0;e<t.length;e++)t[e]()}function Gt(){var t,e,n=new Promise((r,i)=>{t=r,e=i});return{promise:n,resolve:t,reject:e}}const y=2,Zt=4,Pt=8,J=16,W=32,Q=64,Mt=128,O=256,gt=512,E=1024,A=2048,q=4096,B=8192,X=16384,Jt=32768,wt=65536,Qt=1<<17,Xe=1<<18,it=1<<19,$e=1<<20,Ft=1<<21,Dt=1<<22,$=1<<23,mt=Symbol("$state"),tn=Symbol("legacy props"),st=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function en(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function nn(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function rn(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function sn(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function ln(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function fn(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function an(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}function un(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function Xt(t){return t===this.v}let on=!1,R=null;function lt(t){R=t}function $t(t,e=!1,n){R={p:R,c:null,e:null,s:t,x:null,l:null}}function te(t){var e=R,n=e.e;if(n!==null){e.e=null;for(var r of n)Cn(r)}return R=e.p,{}}function ee(){return!0}let ft=[];function cn(){var t=ft;ft=[],Qe(t)}function bt(t){if(ft.length===0){var e=ft;queueMicrotask(()=>{e===ft&&cn()})}ft.push(t)}const hn=new WeakMap;function ne(t){var e=p;if(e===null)return d.f|=$,t;if((e.f&Jt)===0){if((e.f&Mt)===0)throw!e.parent&&t instanceof Error&&re(t),t;e.b.error(t)}else at(t,e)}function at(t,e){for(;e!==null;){if((e.f&Mt)!==0)try{e.b.error(t);return}catch(n){t=n}e=e.parent}throw t instanceof Error&&re(t),t}function re(t){const e=hn.get(t);e&&(Rt(t,"message",{value:e.message}),Rt(t,"stack",{value:e.stack}))}const yt=new Set;let g=null,P=null,It=new Set,Y=[],jt=null,Lt=!1;class D{current=new Map;#e=new Map;#t=new Set;#n=0;#i=null;#f=[];#l=[];#s=[];#r=[];#a=[];skipped_effects=new Set;process(e){Y=[],this.apply();for(const s of e)this.#u(s);if(this.#n===0){var n=P;this.#c();var r=this.#f,i=this.#l;this.#f=[],this.#l=[],this.#s=[],g=null,P=n,ie(r),ie(i),this.#i?.resolve()}else this.#o(this.#f),this.#o(this.#l),this.#o(this.#s);P=null}#u(e){e.f^=E;for(var n=e.first;n!==null;){var r=n.f,i=(r&(W|Q))!==0,s=i&&(r&E)!==0,l=s||(r&B)!==0||this.skipped_effects.has(n);if(!l&&n.fn!==null){i?n.f^=E:(r&Zt)!==0?this.#l.push(n):At(n)&&((n.f&J)!==0&&this.#s.push(n),Nt(n));var a=n.first;if(a!==null){n=a;continue}}var f=n.parent;for(n=n.next;n===null&&f!==null;)n=f.next,f=f.parent}}#o(e){for(const n of e)((n.f&A)!==0?this.#r:this.#a).push(n),k(n,E);e.length=0}capture(e,n){this.#e.has(e)||this.#e.set(e,n),this.current.set(e,e.v),P?.set(e,e.v)}activate(){g=this}deactivate(){g=null,P=null}flush(){if(Y.length>0){if(this.activate(),_n(),g!==null&&g!==this)return}else this.#n===0&&this.#c();this.deactivate();for(const e of It)if(It.delete(e),e(),g!==null)break}#c(){for(const e of this.#t)e();if(this.#t.clear(),yt.size>1){this.#e.clear();let e=!0;for(const n of yt){if(n===this){e=!1;continue}const r=[];for(const[s,l]of this.current){if(n.current.has(s))if(e&&l!==n.current.get(s))n.current.set(s,l);else continue;r.push(s)}if(r.length===0)continue;const i=[...n.current.keys()].filter(s=>!this.current.has(s));if(i.length>0){for(const s of r)se(s,i);if(Y.length>0){g=n,n.apply();for(const s of Y)n.#u(s);Y=[],n.deactivate()}}}g=null}yt.delete(this)}increment(){this.#n+=1}decrement(){this.#n-=1;for(const e of this.#r)k(e,A),et(e);for(const e of this.#a)k(e,q),et(e);this.flush()}add_callback(e){this.#t.add(e)}settled(){return(this.#i??=Gt()).promise}static ensure(){if(g===null){const e=g=new D;yt.add(g),D.enqueue(()=>{g===e&&e.flush()})}return g}static enqueue(e){bt(e)}apply(){}}function _n(){var t=ct;Lt=!0;try{var e=0;for(ke(!0);Y.length>0;){var n=D.ensure();if(e++>1e3){var r,i;vn()}n.process(Y),z.clear()}}finally{Lt=!1,ke(t),jt=null}}function vn(){try{nn()}catch(t){at(t,jt)}}let tt=null;function ie(t){var e=t.length;if(e!==0){for(var n=0;n<e;){var r=t[n++];if((r.f&(X|B))===0&&At(r)&&(tt=[],Nt(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null&&r.ac===null?be(r):r.fn=null),tt?.length>0)){z.clear();for(const i of tt)Nt(i);tt=[]}}tt=null}}function se(t,e){if(t.reactions!==null)for(const n of t.reactions){const r=n.f;(r&y)!==0?se(n,e):(r&(Dt|J))!==0&&le(n,e)&&(k(n,A),et(n))}}function le(t,e){if(t.deps!==null){for(const n of t.deps)if(e.includes(n)||(n.f&y)!==0&&le(n,e))return!0}return!1}function et(t){for(var e=jt=t;e.parent!==null;){e=e.parent;var n=e.f;if(Lt&&e===p&&(n&J)!==0)return;if((n&(Q|W))!==0){if((n&E)===0)return;e.f^=E}}Y.push(e)}function dn(t){let e=0,n=Et(0),r;return()=>{Sn()&&(j(n),Pn(()=>(e===0&&(r=Un(()=>t(()=>vt(n)))),e+=1,()=>{bt(()=>{e-=1,e===0&&(r?.(),r=void 0,vt(n))})})))}}var pn=wt|it|Mt;function gn(t,e,n){new wn(t,e,n)}class wn{parent;#e=!1;#t;#n=null;#i;#f;#l;#s=null;#r=null;#a=null;#u=null;#o=0;#c=0;#_=!1;#h=null;#g=()=>{this.#h&&xt(this.#h,this.#o)};#w=dn(()=>(this.#h=Et(this.#o),()=>{this.#h=null}));constructor(e,n,r){this.#t=e,this.#i=n,this.#f=r,this.parent=p.b,this.#e=!!this.#i.pending,this.#l=ge(()=>{p.b=this;{try{this.#s=L(()=>r(this.#t))}catch(i){this.error(i)}this.#c>0?this.#d():this.#e=!1}},pn)}#m(){try{this.#s=L(()=>this.#f(this.#t))}catch(e){this.error(e)}this.#e=!1}#b(){const e=this.#i.pending;e&&(this.#r=L(()=>e(this.#t)),D.enqueue(()=>{this.#s=this.#v(()=>(D.ensure(),L(()=>this.#f(this.#t)))),this.#c>0?this.#d():(dt(this.#r,()=>{this.#r=null}),this.#e=!1)}))}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#i.pending}#v(e){var n=p,r=d,i=R;I(this.#l),T(this.#l),lt(this.#l.ctx);try{return e()}catch(s){return ne(s),null}finally{I(n),T(r),lt(i)}}#d(){const e=this.#i.pending;this.#s!==null&&(this.#u=document.createDocumentFragment(),xe(this.#s,this.#u)),this.#r===null&&(this.#r=L(()=>e(this.#t)))}#p(e){if(!this.has_pending_snippet()){this.parent&&this.parent.#p(e);return}this.#c+=e,this.#c===0&&(this.#e=!1,this.#r&&dt(this.#r,()=>{this.#r=null}),this.#u&&(this.#t.before(this.#u),this.#u=null),bt(()=>{D.ensure().flush()}))}update_pending_count(e){this.#p(e),this.#o+=e,It.add(this.#g)}get_effect_pending(){return this.#w(),j(this.#h)}error(e){var n=this.#i.onerror;let r=this.#i.failed;if(this.#_||!n&&!r)throw e;this.#s&&(N(this.#s),this.#s=null),this.#r&&(N(this.#r),this.#r=null),this.#a&&(N(this.#a),this.#a=null);var i=!1,s=!1;const l=()=>{if(i){un();return}i=!0,s&&an(),D.ensure(),this.#o=0,this.#a!==null&&dt(this.#a,()=>{this.#a=null}),this.#e=this.has_pending_snippet(),this.#s=this.#v(()=>(this.#_=!1,L(()=>this.#f(this.#t)))),this.#c>0?this.#d():this.#e=!1};var a=d;try{T(null),s=!0,n?.(e,l),s=!1}catch(f){at(f,this.#l&&this.#l.parent)}finally{T(a)}r&&bt(()=>{this.#a=this.#v(()=>{this.#_=!0;try{return L(()=>{r(this.#t,()=>e,()=>l)})}catch(f){return at(f,this.#l.parent),null}finally{this.#_=!1}})})}}function mn(t,e,n){const r=fe;if(e.length===0){n(t.map(r));return}var i=g,s=p,l=bn();Promise.all(e.map(a=>yn(a))).then(a=>{l();try{n([...t.map(r),...a])}catch(f){(s.f&X)===0&&at(f,s)}i?.deactivate(),Vt()}).catch(a=>{at(a,s)})}function bn(){var t=p,e=d,n=R,r=g;return function(){I(t),T(e),lt(n),r?.activate()}}function Vt(){I(null),T(null),lt(null)}function fe(t){var e=y|A,n=d!==null&&(d.f&y)!==0?d:null;return p===null||n!==null&&(n.f&O)!==0?e|=O:p.f|=it,{ctx:R,deps:null,effects:null,equals:Xt,f:e,fn:t,reactions:null,rv:0,v:b,wv:0,parent:n??p,ac:null}}function yn(t,e){let n=p;n===null&&en();var r=n.b,i=void 0,s=Et(b),l=!d,a=new Map;return Rn(()=>{var f=Gt();i=f.promise;try{Promise.resolve(t()).then(f.resolve,f.reject).then(Vt)}catch(_){f.reject(_),Vt()}var u=g,o=r.is_pending();l&&(r.update_pending_count(1),o||(u.increment(),a.get(u)?.reject(st),a.delete(u),a.set(u,f)));const h=(_,c=void 0)=>{if(o||u.activate(),c)c!==st&&(s.f|=$,xt(s,c));else{(s.f&$)!==0&&(s.f^=$),xt(s,_);for(const[v,w]of a){if(a.delete(v),v===u)break;w.reject(st)}}l&&(r.update_pending_count(-1),o||u.decrement())};f.promise.then(h,_=>h(null,_||"unknown"))}),Nn(()=>{for(const f of a.values())f.reject(st)}),new Promise(f=>{function u(o){function h(){o===i?f(s):u(i)}o.then(h,h)}u(i)})}function ae(t){var e=t.effects;if(e!==null){t.effects=null;for(var n=0;n<e.length;n+=1)N(e[n])}}function En(t){for(var e=t.parent;e!==null;){if((e.f&y)===0)return e;e=e.parent}return null}function Ut(t){var e,n=p;I(En(t));try{ae(t),e=Oe(t)}finally{I(n)}return e}function ue(t){var e=Ut(t);if(t.equals(e)||(t.v=e,t.wv=Ne()),!ht)if(P!==null)P.set(t,t.v);else{var n=(Z||(t.f&O)!==0)&&t.deps!==null?q:E;k(t,n)}}const z=new Map;function Et(t,e){var n={f:0,v:t,reactions:null,equals:Xt,rv:0,wv:0};return n}function H(t,e){const n=Et(t);return jn(n),n}function K(t,e,n=!1){d!==null&&(!M||(d.f&Qt)!==0)&&ee()&&(d.f&(y|J|Dt|Qt))!==0&&!V?.includes(t)&&fn();let r=n?ut(e):e;return xt(t,r)}function xt(t,e){if(!t.equals(e)){var n=t.v;ht?z.set(t,e):z.set(t,n),t.v=e;var r=D.ensure();r.capture(t,n),(t.f&y)!==0&&((t.f&A)!==0&&Ut(t),k(t,(t.f&O)===0?E:q)),t.wv=Ne(),oe(t,A),p!==null&&(p.f&E)!==0&&(p.f&(W|Q))===0&&(C===null?Ln([t]):C.push(t))}return e}function vt(t){K(t,t.v+1)}function oe(t,e){var n=t.reactions;if(n!==null)for(var r=n.length,i=0;i<r;i++){var s=n[i],l=s.f,a=(l&A)===0;a&&k(s,e),(l&y)!==0?oe(s,q):a&&((l&J)!==0&&tt!==null&&tt.push(s),et(s))}}function ut(t){if(typeof t!="object"||t===null||mt in t)return t;const e=Ht(t);if(e!==Ze&&e!==Je)return t;var n=new Map,r=zt(t),i=H(0),s=nt,l=a=>{if(nt===s)return a();var f=d,u=nt;T(null),Se(s);var o=a();return T(f),Se(u),o};return r&&n.set("length",H(t.length)),new Proxy(t,{defineProperty(a,f,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&sn();var o=n.get(f);return o===void 0?o=l(()=>{var h=H(u.value);return n.set(f,h),h}):K(o,u.value,!0),!0},deleteProperty(a,f){var u=n.get(f);if(u===void 0){if(f in a){const o=l(()=>H(b));n.set(f,o),vt(i)}}else K(u,b),vt(i);return!0},get(a,f,u){if(f===mt)return t;var o=n.get(f),h=f in a;if(o===void 0&&(!h||rt(a,f)?.writable)&&(o=l(()=>{var c=ut(h?a[f]:b),v=H(c);return v}),n.set(f,o)),o!==void 0){var _=j(o);return _===b?void 0:_}return Reflect.get(a,f,u)},getOwnPropertyDescriptor(a,f){var u=Reflect.getOwnPropertyDescriptor(a,f);if(u&&"value"in u){var o=n.get(f);o&&(u.value=j(o))}else if(u===void 0){var h=n.get(f),_=h?.v;if(h!==void 0&&_!==b)return{enumerable:!0,configurable:!0,value:_,writable:!0}}return u},has(a,f){if(f===mt)return!0;var u=n.get(f),o=u!==void 0&&u.v!==b||Reflect.has(a,f);if(u!==void 0||p!==null&&(!o||rt(a,f)?.writable)){u===void 0&&(u=l(()=>{var _=o?ut(a[f]):b,c=H(_);return c}),n.set(f,u));var h=j(u);if(h===b)return!1}return o},set(a,f,u,o){var h=n.get(f),_=f in a;if(r&&f==="length")for(var c=u;c<h.v;c+=1){var v=n.get(c+"");v!==void 0?K(v,b):c in a&&(v=l(()=>H(b)),n.set(c+"",v))}if(h===void 0)(!_||rt(a,f)?.writable)&&(h=l(()=>H(void 0)),K(h,ut(u)),n.set(f,h));else{_=h.v!==b;var w=l(()=>ut(u));K(h,w)}var m=Reflect.getOwnPropertyDescriptor(a,f);if(m?.set&&m.set.call(o,u),!_){if(r&&typeof f=="string"){var U=n.get("length"),F=Number(f);Number.isInteger(F)&&F>=U.v&&K(U,F+1)}vt(i)}return!0},ownKeys(a){j(i);var f=Reflect.ownKeys(a).filter(h=>{var _=n.get(h);return _===void 0||_.v!==b});for(var[u,o]of n)o.v!==b&&!(u in a)&&f.push(u);return f},setPrototypeOf(){ln()}})}var ce,he,_e,ve;function xn(){if(ce===void 0){ce=window,he=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,n=Text.prototype;_e=rt(e,"firstChild").get,ve=rt(e,"nextSibling").get,Kt(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),Kt(n)&&(n.__t=void 0)}}function Wt(t=""){return document.createTextNode(t)}function kt(t){return _e.call(t)}function Tt(t){return ve.call(t)}function ot(t,e){return kt(t)}function kn(t,e=!1){{var n=kt(t);return n instanceof Comment&&n.data===""?Tt(n):n}}function qt(t,e=1,n=!1){let r=t;for(;e--;)r=Tt(r);return r}function Tn(){return!1}function de(t){var e=d,n=p;T(null),I(null);try{return t()}finally{T(e),I(n)}}function An(t,e){var n=e.last;n===null?e.last=e.first=t:(n.next=t,t.prev=n,e.last=t)}function G(t,e,n,r=!0){var i=p;i!==null&&(i.f&B)!==0&&(t|=B);var s={ctx:R,deps:null,nodes_start:null,nodes_end:null,f:t|A,first:null,fn:e,last:null,next:null,parent:i,b:i&&i.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{Nt(s),s.f|=Jt}catch(f){throw N(s),f}else e!==null&&et(s);if(r){var l=s;if(n&&l.deps===null&&l.teardown===null&&l.nodes_start===null&&l.first===l.last&&(l.f&it)===0&&(l=l.first),l!==null&&(l.parent=i,i!==null&&An(l,i),d!==null&&(d.f&y)!==0&&(t&Q)===0)){var a=d;(a.effects??=[]).push(l)}}return s}function Sn(){return d!==null&&!M}function Nn(t){const e=G(Pt,null,!1);return k(e,E),e.teardown=t,e}function Cn(t){return G(Zt|$e,t,!1)}function On(t){D.ensure();const e=G(Q|it,t,!0);return(n={})=>new Promise(r=>{n.outro?dt(e,()=>{N(e),r(void 0)}):(N(e),r(void 0))})}function Rn(t){return G(Dt|it,t,!0)}function Pn(t,e=0){return G(Pt|e,t,!0)}function pe(t,e=[],n=[]){mn(e,n,r=>{G(Pt,()=>t(...r.map(j)),!0)})}function ge(t,e=0){var n=G(J|e,t,!0);return n}function L(t,e=!0){return G(W|it,t,!0,e)}function we(t){var e=t.teardown;if(e!==null){const n=ht,r=d;Te(!0),T(null);try{e.call(null)}finally{Te(n),T(r)}}}function me(t,e=!1){var n=t.first;for(t.first=t.last=null;n!==null;){const i=n.ac;i!==null&&de(()=>{i.abort(st)});var r=n.next;(n.f&Q)!==0?n.parent=null:N(n,e),n=r}}function Mn(t){for(var e=t.first;e!==null;){var n=e.next;(e.f&W)===0&&N(e),e=n}}function N(t,e=!0){var n=!1;(e||(t.f&Xe)!==0)&&t.nodes_start!==null&&t.nodes_end!==null&&(Fn(t.nodes_start,t.nodes_end),n=!0),me(t,e&&!n),St(t,0),k(t,X);var r=t.transitions;if(r!==null)for(const s of r)s.stop();we(t);var i=t.parent;i!==null&&i.first!==null&&be(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=t.ac=null}function Fn(t,e){for(;t!==null;){var n=t===e?null:Tt(t);t.remove(),t=n}}function be(t){var e=t.parent,n=t.prev,r=t.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),e!==null&&(e.first===t&&(e.first=r),e.last===t&&(e.last=n))}function dt(t,e,n=!0){var r=[];ye(t,r,!0),Dn(r,()=>{n&&N(t),e&&e()})}function Dn(t,e){var n=t.length;if(n>0){var r=()=>--n||e();for(var i of t)i.out(r)}else e()}function ye(t,e,n){if((t.f&B)===0){if(t.f^=B,t.transitions!==null)for(const l of t.transitions)(l.is_global||n)&&e.push(l);for(var r=t.first;r!==null;){var i=r.next,s=(r.f&wt)!==0||(r.f&W)!==0;ye(r,e,s?n:!1),r=i}}}function In(t){Ee(t,!0)}function Ee(t,e){if((t.f&B)!==0){t.f^=B,(t.f&E)===0&&(k(t,A),et(t));for(var n=t.first;n!==null;){var r=n.next,i=(n.f&wt)!==0||(n.f&W)!==0;Ee(n,i?e:!1),n=r}if(t.transitions!==null)for(const s of t.transitions)(s.is_global||e)&&s.in()}}function xe(t,e){for(var n=t.nodes_start,r=t.nodes_end;n!==null;){var i=n===r?null:Tt(n);e.append(n),n=i}}let ct=!1;function ke(t){ct=t}let ht=!1;function Te(t){ht=t}let d=null,M=!1;function T(t){d=t}let p=null;function I(t){p=t}let V=null;function jn(t){d!==null&&(V===null?V=[t]:V.push(t))}let x=null,S=0,C=null;function Ln(t){C=t}let Ae=1,pt=0,nt=pt;function Se(t){nt=t}let Z=!1;function Ne(){return++Ae}function At(t){var e=t.f;if((e&A)!==0)return!0;if((e&q)!==0){var n=t.deps,r=(e&O)!==0;if(n!==null){var i,s,l=(e&gt)!==0,a=r&&p!==null&&!Z,f=n.length;if((l||a)&&(p===null||(p.f&X)===0)){var u=t,o=u.parent;for(i=0;i<f;i++)s=n[i],(l||!s?.reactions?.includes(u))&&(s.reactions??=[]).push(u);l&&(u.f^=gt),a&&o!==null&&(o.f&O)===0&&(u.f^=O)}for(i=0;i<f;i++)if(s=n[i],At(s)&&ue(s),s.wv>t.wv)return!0}(!r||p!==null&&!Z)&&k(t,E)}return!1}function Ce(t,e,n=!0){var r=t.reactions;if(r!==null&&!V?.includes(t))for(var i=0;i<r.length;i++){var s=r[i];(s.f&y)!==0?Ce(s,e,!1):e===s&&(n?k(s,A):(s.f&E)!==0&&k(s,q),et(s))}}function Oe(t){var e=x,n=S,r=C,i=d,s=Z,l=V,a=R,f=M,u=nt,o=t.f;x=null,S=0,C=null,Z=(o&O)!==0&&(M||!ct||d===null),d=(o&(W|Q))===0?t:null,V=null,lt(t.ctx),M=!1,nt=++pt,t.ac!==null&&(de(()=>{t.ac.abort(st)}),t.ac=null);try{t.f|=Ft;var h=t.fn,_=h(),c=t.deps;if(x!==null){var v;if(St(t,S),c!==null&&S>0)for(c.length=S+x.length,v=0;v<x.length;v++)c[S+v]=x[v];else t.deps=c=x;if(!Z||(o&y)!==0&&t.reactions!==null)for(v=S;v<c.length;v++)(c[v].reactions??=[]).push(t)}else c!==null&&S<c.length&&(St(t,S),c.length=S);if(ee()&&C!==null&&!M&&c!==null&&(t.f&(y|q|A))===0)for(v=0;v<C.length;v++)Ce(C[v],t);return i!==null&&i!==t&&(pt++,C!==null&&(r===null?r=C:r.push(...C))),(t.f&$)!==0&&(t.f^=$),_}catch(w){return ne(w)}finally{t.f^=Ft,x=e,S=n,C=r,d=i,Z=s,V=l,lt(a),M=f,nt=u}}function Vn(t,e){let n=e.reactions;if(n!==null){var r=He.call(n,t);if(r!==-1){var i=n.length-1;i===0?n=e.reactions=null:(n[r]=n[i],n.pop())}}n===null&&(e.f&y)!==0&&(x===null||!x.includes(e))&&(k(e,q),(e.f&(O|gt))===0&&(e.f^=gt),ae(e),St(e,0))}function St(t,e){var n=t.deps;if(n!==null)for(var r=e;r<n.length;r++)Vn(t,n[r])}function Nt(t){var e=t.f;if((e&X)===0){k(t,E);var n=p,r=ct;p=t,ct=!0;try{(e&J)!==0?Mn(t):me(t),we(t);var i=Oe(t);t.teardown=typeof i=="function"?i:null,t.wv=Ae;var s;Yt&&on&&(t.f&A)!==0&&t.deps}finally{ct=r,p=n}}}function j(t){var e=t.f,n=(e&y)!==0;if(d!==null&&!M){var r=p!==null&&(p.f&X)!==0;if(!r&&!V?.includes(t)){var i=d.deps;if((d.f&Ft)!==0)t.rv<pt&&(t.rv=pt,x===null&&i!==null&&i[S]===t?S++:x===null?x=[t]:(!Z||!x.includes(t))&&x.push(t));else{(d.deps??=[]).push(t);var s=t.reactions;s===null?t.reactions=[d]:s.includes(d)||s.push(d)}}}else if(n&&t.deps===null&&t.effects===null){var l=t,a=l.parent;a!==null&&(a.f&O)===0&&(l.f^=O)}if(ht){if(z.has(t))return z.get(t);if(n){l=t;var f=l.v;return((l.f&E)===0&&l.reactions!==null||Re(l))&&(f=Ut(l)),z.set(l,f),f}}else if(n){if(l=t,P?.has(l))return P.get(l);At(l)&&ue(l)}if(P?.has(t))return P.get(t);if((t.f&$)!==0)throw t.v;return t.v}function Re(t){if(t.v===b)return!0;if(t.deps===null)return!1;for(const e of t.deps)if(z.has(e)||(e.f&y)!==0&&Re(e))return!0;return!1}function Un(t){var e=M;try{return M=!0,t()}finally{M=e}}const Wn=-7169;function k(t,e){t.f=t.f&Wn|e}const Pe=new Set,Bt=new Set;function qn(t){for(var e=0;e<t.length;e++)Pe.add(t[e]);for(var n of Bt)n(t)}let Me=null;function Ct(t){var e=this,n=e.ownerDocument,r=t.type,i=t.composedPath?.()||[],s=i[0]||t.target;Me=t;var l=0,a=Me===t&&t.__root;if(a){var f=i.indexOf(a);if(f!==-1&&(e===document||e===window)){t.__root=e;return}var u=i.indexOf(e);if(u===-1)return;f<=u&&(l=f)}if(s=i[l]||t.target,s!==e){Rt(t,"currentTarget",{configurable:!0,get(){return s||n}});var o=d,h=p;T(null),I(null);try{for(var _,c=[];s!==null;){var v=s.assignedSlot||s.parentNode||s.host||null;try{var w=s["__"+r];if(w!=null&&(!s.disabled||t.target===s))if(zt(w)){var[m,...U]=w;m.apply(s,[t,...U])}else w.call(s,t)}catch(F){_?c.push(F):_=F}if(t.cancelBubble||v===e||v===null)break;s=v}if(_){for(let F of c)queueMicrotask(()=>{throw F});throw _}}finally{t.__root=e,delete t.currentTarget,T(o),I(h)}}}function Bn(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function Fe(t,e){var n=p;n.nodes_start===null&&(n.nodes_start=t,n.nodes_end=e)}function De(t,e){var n=(e&Be)!==0,r=(e&Ye)!==0,i,s=!t.startsWith("<!>");return()=>{i===void 0&&(i=Bn(s?t:"<!>"+t),n||(i=kt(i)));var l=r||he?document.importNode(i,!0):i.cloneNode(!0);if(n){var a=kt(l),f=l.lastChild;Fe(a,f)}else Fe(l,l);return l}}function Ie(t,e){t!==null&&t.before(e)}const Yn=["touchstart","touchmove"];function zn(t){return Yn.includes(t)}function Hn(t,e){var n=e==null?"":typeof e=="object"?e+"":e;n!==(t.__t??=t.nodeValue)&&(t.__t=n,t.nodeValue=n+"")}function je(t,e){return Kn(t,e)}const _t=new Map;function Kn(t,{target:e,anchor:n,props:r={},events:i,context:s,intro:l=!0}){xn();var a=new Set,f=h=>{for(var _=0;_<h.length;_++){var c=h[_];if(!a.has(c)){a.add(c);var v=zn(c);e.addEventListener(c,Ct,{passive:v});var w=_t.get(c);w===void 0?(document.addEventListener(c,Ct,{passive:v}),_t.set(c,1)):_t.set(c,w+1)}}};f(Ke(Pe)),Bt.add(f);var u=void 0,o=On(()=>{var h=n??e.appendChild(Wt());return gn(h,{pending:()=>{}},_=>{if(s){$t({});var c=R;c.c=s}i&&(r.$$events=i),u=t(_,r)||{},s&&te()}),()=>{for(var _ of a){e.removeEventListener(_,Ct);var c=_t.get(_);--c===0?(document.removeEventListener(_,Ct),_t.delete(_)):_t.set(_,c)}Bt.delete(f),h!==n&&h.parentNode?.removeChild(h)}});return Gn.set(u,o),u}let Gn=new WeakMap;class Zn{anchor;#e=new Map;#t=new Map;#n=new Map;#i=!0;constructor(e,n=!0){this.anchor=e,this.#i=n}#f=()=>{var e=g;if(this.#e.has(e)){var n=this.#e.get(e),r=this.#t.get(n);if(r)In(r);else{var i=this.#n.get(n);i&&(this.#t.set(n,i.effect),this.#n.delete(n),i.fragment.lastChild.remove(),this.anchor.before(i.fragment),r=i.effect)}for(const[s,l]of this.#e){if(this.#e.delete(s),s===e)break;const a=this.#n.get(l);a&&(N(a.effect),this.#n.delete(l))}for(const[s,l]of this.#t){if(s===n)continue;const a=()=>{if(Array.from(this.#e.values()).includes(s)){var u=document.createDocumentFragment();xe(l,u),u.append(Wt()),this.#n.set(s,{effect:l,fragment:u})}else N(l);this.#t.delete(s)};this.#i||!r?dt(l,a,!1):a()}}};ensure(e,n){var r=g,i=Tn();if(n&&!this.#t.has(e)&&!this.#n.has(e))if(i){var s=document.createDocumentFragment(),l=Wt();s.append(l),this.#n.set(e,{effect:L(()=>n(l)),fragment:s})}else this.#t.set(e,L(()=>n(this.anchor)));if(this.#e.set(r,e),i){for(const[a,f]of this.#t)a===e?r.skipped_effects.delete(f):r.skipped_effects.add(f);for(const[a,f]of this.#n)a===e?r.skipped_effects.delete(f.effect):r.skipped_effects.add(f.effect);r.add_callback(this.#f)}else this.#f()}}function Jn(t,e,n=!1){var r=new Zn(t),i=n?wt:0;function s(l,a){r.ensure(l,a)}ge(()=>{var l=!1;e((a,f=!0)=>{l=!0,s(f,a)}),l||s(!1,null)},i)}function Qn(t,e,n){var r=t==null?"":""+t;return r===""?null:r}function Xn(t,e){return t==null?null:String(t)}function Le(t,e,n,r,i,s){var l=t.__className;if(l!==n||l===void 0){var a=Qn(n);a==null?t.removeAttribute("class"):t.className=a,t.__className=n}return s}function $n(t,e,n,r){var i=t.__style;if(i!==e){var s=Xn(e);s==null?t.removeAttribute("style"):t.style.cssText=s,t.__style=e}return r}const tr=Symbol("is custom element"),er=Symbol("is html");function nr(t,e,n,r){var i=rr(t);i[e]!==(i[e]=n)&&(n==null?t.removeAttribute(e):typeof n!="string"&&ir(t).includes(e)?t[e]=n:t.setAttribute(e,n))}function rr(t){return t.__attributes??={[tr]:t.nodeName.includes("-"),[er]:t.namespaceURI===ze}}var Ve=new Map;function ir(t){var e=t.getAttribute("is")||t.nodeName,n=Ve.get(e);if(n)return n;Ve.set(e,n=[]);for(var r,i=t,s=Element.prototype;s!==i;){r=Ge(i);for(var l in r)r[l].set&&n.push(l);i=Ht(i)}return n}let Ot=!1;function sr(t){var e=Ot;try{return Ot=!1,[t(),Ot]}finally{Ot=e}}function lr(t,e,n,r){var i=r,s=!0,l=()=>(s&&(s=!1,i=r),i),a;{var f=mt in t||tn in t;a=rt(t,e)?.set??(f&&e in t?m=>t[e]=m:void 0)}var u,o=!1;[u,o]=sr(()=>t[e]),u===void 0&&r!==void 0&&(u=l(),a&&(rn(),a(u)));var h;if(h=()=>{var m=t[e];return m===void 0?l():(s=!0,m)},a){var _=t.$$legacy;return(function(m,U){return arguments.length>0?((!U||_||o)&&a(U?h():m),m):h()})}var c=!1,v=fe(()=>(c=!1,h()));j(v);var w=p;return(function(m,U){if(arguments.length>0){const F=U?j(v):ut(m);return K(v,F),c=!0,i!==void 0&&(i=F),m}return ht&&c||(w.f&X)!==0?v.v:j(v)})}function Ue(t,e){e(!e())}var fr=De('<div><div class="bg-white rounded-lg shadow-2xl w-96 h-[600px] flex flex-col"><div class="bg-gray-100 p-4 rounded-t-lg flex justify-between items-center border-b"><h3 class="font-semibold text-gray-800"> </h3> <button class="text-gray-600 hover:text-gray-800">✕</button></div> <div class="flex-1 overflow-hidden"><iframe class="w-full h-full border-0" title="Virtual Agent Chat"></iframe></div></div></div>'),ar=De('<div><button class="rounded-full w-14 h-14 flex items-center justify-center shadow-lg hover:opacity-90 transition"><span class="text-white text-2xl">💬</span></button></div> <!>',1);function We(t,e){$t(e,!0);let n=lr(e,"isOpen",15,!1);console.log("🎨 Widget received individual props:",{embedUrl:e.embedUrl,position:e.position,primaryColor:e.primaryColor,agentName:e.agentName,isOpen:n()});var r=ar(),i=kn(r),s=ot(i);s.__click=[Ue,n];var l=qt(i,2);{var a=f=>{var u=fr(),o=ot(u),h=ot(o),_=ot(h),c=ot(_),v=qt(_,2);v.__click=[Ue,n];var w=qt(h,2),m=ot(w);pe(()=>{Le(u,1,`fixed bottom-20 ${e.position==="bottom-right"?"right-4":"left-4"} z-50`),Hn(c,e.agentName),nr(m,"src",e.embedUrl)}),Ie(f,u)};Jn(l,f=>{n()&&f(a)})}pe(()=>{Le(i,1,`fixed ${e.position==="bottom-right"?"bottom-4 right-4":"bottom-4 left-4"} z-50`),$n(s,`background-color: ${e.primaryColor??""}`)}),Ie(t,r),te()}qn(["click"]);class ur{widget=null;config=null;container=null;init(e){console.log("🔧 VirtualAgent.init called with config:",e),this.config={position:"bottom-right",primaryColor:"#007bff",agentName:"Virtual Assistant",...e},console.log("🔧 Merged config:",this.config),this.container=document.createElement("div"),this.container.id="virtual-agent-widget",document.body.appendChild(this.container),console.log("🔧 Container created, initializing Widget component...");try{console.log("🔧 Props:",this.config),this.widget=je(We,{target:this.container,props:this.config}),console.log("✅ Widget initialized successfully")}catch(n){throw console.error("❌ Widget initialization failed:",n),console.error("❌ Error stack:",n.stack),n}}open(){console.log("Opening widget..."),this.widget&&this.config&&this.remount({...this.config,isOpen:!0})}close(){console.log("Closing widget..."),this.widget&&this.config&&this.remount({...this.config,isOpen:!1})}toggle(){console.log("Toggling widget..."),this.open()}remount(e){this.container&&(this.widget.unmount?.(),this.container.innerHTML="",this.widget=je(We,{target:this.container,props:e}))}updateConfig(e){if(console.log("Updating config:",e),!this.config||!this.widget){console.error("Widget not initialized");return}this.config={...this.config,...e},this.remount(this.config),console.log("✅ Config updated:",this.config)}destroy(){this.widget&&(this.widget.unmount?.(),this.widget=null)}}const qe=new ur;return window.VirtualAgent=qe,qe})();
